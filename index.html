<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Battleship</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
    }
  </style>
  <script>
    let player = {
      placed: 0,
      toPlace: { carrier: 5, battl: 4 },
      placement: {
        A: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        B: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        C: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        D: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        E: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        F: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        G: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        H: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        I: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        J: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      },
    };

    $(document).ready(function () {
      for (let i = 1; i <= 10; i++) {
        $("tbody").append(`<tr>
          <th>${i}</th>
          <td id=A${i}></td>
          <td id=B${i}></td>
          <td id=C${i}></td>
          <td id=D${i}></td>
          <td id=E${i}></td>
          <td id=F${i}></td>
          <td id=G${i}></td>
          <td id=H${i}></td>
          <td id=I${i}></td>
          <td id=J${i}></td>
        </tr>`);
      }
    });

    $(document).ready(function () {
      $("#player tr td").click(function (event) {
        let id = $(this).attr("id");
        alert(id);
      });
    });

    // async function enter(ship, len) {
    //   $("#log").append(`<p>Place ${ship}. Length is ${len}</p>`);
    //   return new Promise((resolve, reject) => {
    //     let counter = 0;
    //     $("#player tr td").click(function (event) {
    //       let id = $(this).attr("id");
    //       alert(id);
    //       counter++;
    //     });
    //     if (counter == length) resolve();
    //   });
    // }

    $(document).ready(function () {
      $("#start").click(function (event) {
        $("#log").append("<p>Game Initiated. Place your ships.</p>");
        $(this).html("Waiting for ship placement").attr("disabled", "disabled");
        $.each(player.toPlace, async function (key, value) {
          // await enter(key, value);
          $("#log").append(`<p>Place ${key}. Length is ${value}</p>`);
          let count = 0;
          return value !== count;
        });
      });
    });
  </script>
  <body>
    <table id="player">
      <thead>
        <tr>
          <th></th>
          <th>A</th>
          <th>B</th>
          <th>C</th>
          <th>D</th>
          <th>E</th>
          <th>F</th>
          <th>G</th>
          <th>H</th>
          <th>I</th>
          <th>J</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="start">Start Game</button>
    <div>
      <h3>Game Log</h3>
      <div id="log">
        <p>welcome.</p>
      </div>
    </div>
  </body>
</html>
